
<h1>Campsites</h1>

<%= form_with url: search_path, local: true, method: :get do |form| %>
    <%= form.text_field :word %>
    <%= form.select :range, options_for_select([[:post],[:campsite]]) %>
    <%= form.select :search, options_for_select([["完全一致","perfect_match"], ["前方一致","forward_match"],  ["後方一致","backward_match"], ["部分一致","partial_match"]]) %>
    <%= form.submit "検索", disable_with: 'searching...' %>
<% end %>

  <div id="posts">
    <% @campsites.each do |campsite| %>
      <div class="post-content">
<%
=begin
%>
        <% if campsite.image_name %>
          <div class="content-image">
            <%= image_tag campsite.image_name.thumb.url  %>
          </div>
        <% else %>
          <div class="content-image">
            <%= image_tag "/no-image.png", class:"post_image" %>
          </div>
        <% end %> 
<%
=end
%>

        <div class="content-title">
          <%= link_to campsite.name, campsite_path(campsite) %>
        </div>
        <div>
          <%= campsite.prefecture + campsite.municipalitie + campsite.address %>
        </div>
        <div>
          <% if campsite.image_name.present? %>
            <%= image_tag campsite.image_name.thumb.url  %>
          <% else %>
            <%= image_tag "no-image.png", size: '200x200'%>
          <% end %>
        </div>
        <div>
          <%= campsite.introduction %>
        </div>

        <!--お気に入り機能-->
        <% if current_user %>
          <% if campsite.is_liked_by?(current_user) %>
            <%= button_to "お気に入り解除", "/campsites/#{campsite.id}/campsite_likes", method: :delete %>
          <% else %>
            <%= button_to "お気に入り登録", "/campsites/#{campsite.id}/campsite_likes" %>
          <% end %> 
        <% end %>
        
      </div>
    <% end %>
  </div>

  <br>
  <%= link_to "キャンプ場を登録する", new_campsite_path %>

  <p style="color: green"><%= notice %></p>

  <div id="campsites">
  <% @campsites.each do |campsite| %>
    <%= render campsite %>
    <p>
      <!-- %= link_to "Show this campsite", campsite % -->
    </p>
  <% end %>
</div>
  